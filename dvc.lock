schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: 532ffdc20b6b7c37222b1bd7ad382a4c
      size: 1513
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_load:
          dataset_csv: data/raw/AirQualityUCI.csv
          dataset_csv_cleaned: data/raw/AirQualityUCI_cleaned.csv
    outs:
    - path: data/raw/AirQualityUCI_cleaned.csv
      hash: md5
      md5: 8e378a16c33f1b03f30ebadb3574ac99
      size: 919505
  featurize:
    cmd: python src/stages/featurize.py --config=params.yaml
    deps:
    - path: data/raw/AirQualityUCI_cleaned.csv
      hash: md5
      md5: 8e378a16c33f1b03f30ebadb3574ac99
      size: 919505
    - path: src/stages/featurize.py
      hash: md5
      md5: 4a6781327c97fb384bf0687a98e45084
      size: 6524
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        featurize:
          X_scaled_csv_path: data/processed/csv_X_scaled_featurized.csv
          y_csv_path: data/processed/csv_y_featurized.csv
          cols_to_drop:
          - Date
          - Time
          - NMHC(GT)
          - C6H6(GT)
          - PT08.S1(CO)
          - PT08.S2(NMHC)
          - PT08.S3(NOx)
    outs:
    - path: data/processed/csv_X_scaled_featurized.csv
      hash: md5
      md5: 005bcd691519e9eb0e7810c9e1016bc0
      size: 551509
    - path: data/processed/csv_y_featurized.csv
      hash: md5
      md5: 52e3fd08e4be881d7b40682492befc00
      size: 71388
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/processed/csv_X_scaled_featurized.csv
      hash: md5
      md5: 005bcd691519e9eb0e7810c9e1016bc0
      size: 551509
    - path: data/processed/csv_y_featurized.csv
      hash: md5
      md5: 52e3fd08e4be881d7b40682492befc00
      size: 71388
    - path: src/stages/data_split.py
      hash: md5
      md5: 741ef2071eda00a154c44be764a50216
      size: 2919
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split:
          test_size: 0.2
          X_train_csv_path: data/splitdata/X_train.csv
          X_test_csv_path: data/splitdata/X_test.csv
          X_train_scaled_csv_path: data/splitdata/X_train_scaled.csv
          X_test_scaled_csv_path: data/splitdata/X_test_scaled.csv
          y_train_csv_path: data/splitdata/y_train.csv
          y_test_csv_path: data/splitdata/y_test.csv
    outs:
    - path: data/splitdata/X_test.csv
      hash: md5
      md5: 0fda18af6ca7238e9d94e05b8aa7642a
      size: 106794
    - path: data/splitdata/X_test_scaled.csv
      hash: md5
      md5: 40f062eaae54a1c6b0b282a71d2fb793
      size: 252007
    - path: data/splitdata/X_train.csv
      hash: md5
      md5: 869dc59267506174023963a197aabc52
      size: 444263
    - path: data/splitdata/X_train_scaled.csv
      hash: md5
      md5: 91473b80455ae74fdd181891eaa04ff3
      size: 1002273
    - path: data/splitdata/y_test.csv
      hash: md5
      md5: 6fc0db9772d185b1182235fa5cd006d4
      size: 10512
    - path: data/splitdata/y_train.csv
      hash: md5
      md5: 9d0af3b2387925d6a91596aab85d3082
      size: 59202
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/splitdata/X_test.csv
      hash: md5
      md5: 0fda18af6ca7238e9d94e05b8aa7642a
      size: 106794
    - path: data/splitdata/X_test_scaled.csv
      hash: md5
      md5: 40f062eaae54a1c6b0b282a71d2fb793
      size: 252007
    - path: data/splitdata/X_train.csv
      hash: md5
      md5: 869dc59267506174023963a197aabc52
      size: 444263
    - path: data/splitdata/X_train_scaled.csv
      hash: md5
      md5: 91473b80455ae74fdd181891eaa04ff3
      size: 1002273
    - path: data/splitdata/y_test.csv
      hash: md5
      md5: 6fc0db9772d185b1182235fa5cd006d4
      size: 10512
    - path: data/splitdata/y_train.csv
      hash: md5
      md5: 9d0af3b2387925d6a91596aab85d3082
      size: 59202
    - path: src/stages/train.py
      hash: md5
      md5: f2bd45629bcb970dd817675a5b02f00c
      size: 2454
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        train:
          cv: 4
          estimator_name: rdm_forest
          estimators:
            rdm_forest:
              param_grid:
                n_estimators:
                - 15
                - 20
                - 50
                max_features:
                - sqrt
                max_depth:
                - 5
                - 10
                - 20
                min_samples_split:
                - 2
                - 3
                - 5
                min_samples_leaf:
                - 1
                - 2
          model_path: models/model.joblib
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 0cc6b9c32cda681ca2d04f0f2697fd98
      size: 4186401
  evaluate:
    cmd: python src/stages/evaluate.py --config=params.yaml
    deps:
    - path: data/splitdata/X_test_scaled.csv
      hash: md5
      md5: 40f062eaae54a1c6b0b282a71d2fb793
      size: 252007
    - path: data/splitdata/X_train_scaled.csv
      hash: md5
      md5: 91473b80455ae74fdd181891eaa04ff3
      size: 1002273
    - path: data/splitdata/y_test.csv
      hash: md5
      md5: 6fc0db9772d185b1182235fa5cd006d4
      size: 10512
    - path: data/splitdata/y_train.csv
      hash: md5
      md5: 9d0af3b2387925d6a91596aab85d3082
      size: 59202
    - path: models/model.joblib
      hash: md5
      md5: 0cc6b9c32cda681ca2d04f0f2697fd98
      size: 4186401
    - path: src/stages/evaluate.py
      hash: md5
      md5: fdf51b57cc82197d146ff1d39da88baa
      size: 3797
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 1d86a399f185a75a196e7a51dc0eaf19
      size: 219
