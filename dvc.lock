schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: 26189ee6fb4d5cbc74244ecc7b0ce633
      size: 2410
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_load:
          dataset_csv: data/raw/AirQualityUCI.csv
          dataset_csv_cleaned: data/raw/AirQualityUCI_cleaned.csv
    outs:
    - path: data/raw/AirQualityUCI_cleaned.csv
      hash: md5
      md5: cf35f715037fd3f8cb7582669ad9f662
      size: 919505
  featurize:
    cmd: python src/stages/featurize.py --config=params.yaml
    deps:
    - path: data/raw/AirQualityUCI_cleaned.csv
      hash: md5
      md5: cf35f715037fd3f8cb7582669ad9f662
      size: 919505
    - path: src/stages/featurize.py
      hash: md5
      md5: baf62e3ef18cef5a468c9008ea71869a
      size: 6524
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        featurize:
          X_scaled_csv_path: data/processed/csv_X_scaled_featurized.csv
          y_csv_path: data/processed/csv_y_featurized.csv
          cols_to_drop:
          - Date
          - Time
          - NMHC_GT_
          - C6H6_GT_
          - PT08_S1_CO_
          - PT08_S2_NMHC_
          - PT08_S3_NOx_
    outs:
    - path: data/processed/csv_X_scaled_featurized.csv
      hash: md5
      md5: 876df592a602da8c6a58ebdbf75ad387
      size: 551509
    - path: data/processed/csv_y_featurized.csv
      hash: md5
      md5: f6de73a088bab6de6452920ba6834110
      size: 71388
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/processed/csv_X_scaled_featurized.csv
      hash: md5
      md5: 876df592a602da8c6a58ebdbf75ad387
      size: 551509
    - path: data/processed/csv_y_featurized.csv
      hash: md5
      md5: f6de73a088bab6de6452920ba6834110
      size: 71388
    - path: src/stages/data_split.py
      hash: md5
      md5: 741ef2071eda00a154c44be764a50216
      size: 2919
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split:
          test_size: 0.2
          X_train_csv_path: data/splitdata/X_train.csv
          X_test_csv_path: data/splitdata/X_test.csv
          X_train_scaled_csv_path: data/splitdata/X_train_scaled.csv
          X_test_scaled_csv_path: data/splitdata/X_test_scaled.csv
          y_train_csv_path: data/splitdata/y_train.csv
          y_test_csv_path: data/splitdata/y_test.csv
    outs:
    - path: data/splitdata/X_test.csv
      hash: md5
      md5: 3acde9682f4d25b7d3a011f1c9b2a87d
      size: 106794
    - path: data/splitdata/X_test_scaled.csv
      hash: md5
      md5: 978bc7fd26ba5202e1241f3e89679ef9
      size: 252007
    - path: data/splitdata/X_train.csv
      hash: md5
      md5: 38a627f6ddd60447d6b0d8506c2b0cd5
      size: 444263
    - path: data/splitdata/X_train_scaled.csv
      hash: md5
      md5: da51ba0d8806f92b53ac1c5b2dfc66a4
      size: 1002273
    - path: data/splitdata/y_test.csv
      hash: md5
      md5: 1780b3e74959be4fc8e4acd8e89a9559
      size: 10512
    - path: data/splitdata/y_train.csv
      hash: md5
      md5: 85b0e1a2d57445facb3cd7adcfb95f19
      size: 59202
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/splitdata/X_test.csv
      hash: md5
      md5: 3acde9682f4d25b7d3a011f1c9b2a87d
      size: 106794
    - path: data/splitdata/X_test_scaled.csv
      hash: md5
      md5: 978bc7fd26ba5202e1241f3e89679ef9
      size: 252007
    - path: data/splitdata/X_train.csv
      hash: md5
      md5: 38a627f6ddd60447d6b0d8506c2b0cd5
      size: 444263
    - path: data/splitdata/X_train_scaled.csv
      hash: md5
      md5: da51ba0d8806f92b53ac1c5b2dfc66a4
      size: 1002273
    - path: data/splitdata/y_test.csv
      hash: md5
      md5: 1780b3e74959be4fc8e4acd8e89a9559
      size: 10512
    - path: data/splitdata/y_train.csv
      hash: md5
      md5: 85b0e1a2d57445facb3cd7adcfb95f19
      size: 59202
    - path: src/stages/train.py
      hash: md5
      md5: f2bd45629bcb970dd817675a5b02f00c
      size: 2454
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        train:
          cv: 4
          estimator_name: rdm_forest
          estimators:
            rdm_forest:
              param_grid:
                n_estimators:
                - 15
                - 20
                - 50
                max_features:
                - sqrt
                max_depth:
                - 5
                - 10
                - 20
                min_samples_split:
                - 2
                - 3
                - 5
                min_samples_leaf:
                - 1
                - 2
          model_path: models/model.joblib
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 85ee148dbe1f7f18bf03ba00f1e81696
      size: 4186401
  evaluate:
    cmd: python src/stages/evaluate.py --config=params.yaml
    deps:
    - path: data/splitdata/X_test_scaled.csv
      hash: md5
      md5: 978bc7fd26ba5202e1241f3e89679ef9
      size: 252007
    - path: data/splitdata/X_train_scaled.csv
      hash: md5
      md5: da51ba0d8806f92b53ac1c5b2dfc66a4
      size: 1002273
    - path: data/splitdata/y_test.csv
      hash: md5
      md5: 1780b3e74959be4fc8e4acd8e89a9559
      size: 10512
    - path: data/splitdata/y_train.csv
      hash: md5
      md5: 85b0e1a2d57445facb3cd7adcfb95f19
      size: 59202
    - path: models/model.joblib
      hash: md5
      md5: 85ee148dbe1f7f18bf03ba00f1e81696
      size: 4186401
    - path: src/stages/evaluate.py
      hash: md5
      md5: fdf51b57cc82197d146ff1d39da88baa
      size: 3797
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 1d86a399f185a75a196e7a51dc0eaf19
      size: 219
